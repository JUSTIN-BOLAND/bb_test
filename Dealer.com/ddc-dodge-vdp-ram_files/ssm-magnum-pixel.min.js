var SSMGF=SSMGF||{};SSMGF.rid=SSMGF.rid||"";SSMGF.u=SSMGF.u||{};SSMGF.u.guid=SSMGF.u.guid||"";SSMGF.u.has_dnt=SSMGF.u.has_dnt||false;SSMGF.u.is_ready=SSMGF.u.is_ready||false;SSMGF.u.on_ready=SSMGF.u.on_ready||null;SSMGF.u.sid=SSMGF.u.sid||"";var SSMMAG=SSMMAG||{};SSMMAG.guid=SSMMAG.guid||"";SSMMAG.is_ready=SSMMAG.is_ready||false;SSMMAG.on_ready=SSMMAG.on_ready||null;SSMMAG.go=SSMMAG.go||null;SSMMAG.ssmgf_script=SSMMAG.ssmgf_script||"services.cdn.speedshiftmedia.com/gf/core.min.js";SSMMAG.util=SSMMAG.util||{};SSMMAG.util.text=SSMMAG.util.text||{};SSMMAG.util.text.truncate=function(a,b){var d=a;if(SSMGF.util.is.undefined(b)){var b=0}try{if(b>0&&d.length>b){d=d.substring(0,b-3)+"..."}}catch(c){}return d};SSMMAG.util.text.sanitize=function(a){var c=a;try{c=escape(c)}catch(b){}return c};SSMMAG.util.text.sanitize_url=function(b){var a=b;try{a=escape(a)}catch(c){}return a};SSMMAG.fn=SSMMAG.fn||(function(n,l){var y="magnum.cdn.speedshiftmedia.com";var q={};var h=Array();var j=false;var E=false;var k=false;var z={v:16052514,private_errors:Array(),private_load_time:new Date().getTime()};var b=0;var A={allow:[],ignore:[],check_magcap:false,captured:[],pixel_object:{}};function v(x){if(j){x.call(n,[])}else{h.push(function(){return x.call(n,[])})}}function e(){if(typeof(SSMGF)==="undefined"||SSMGF===l||!("util" in SSMGF)){if(!k){var J=document.createElement("script");J.type="text/javascript";J.src=document.location.protocol+"//"+SSMMAG.ssmgf_script;if(J.addEventListener){J.onload=function(){SSMMAG.fn.init()}}else{if(J.readyState){J.onreadystatechange=function(){if(J.readyState in {loaded:1,complete:1}){J.onreadystagechange=null;SSMMAG.fn.init()}}}}var I=document.body.appendChild(J);k=true}return false}else{k=true}if(!SSMGF.u.is_ready){SSMGF.u.on_ready(function(){SSMMAG.fn.init()});SSMGF.u.fn.init();return false}if(E){return false}E=true;if(SSMGF.u.has_dnt||SSMGF.u.guid==""){return false}z.private_init_time=new Date().getTime();SSMMAG.guid=SSMGF.u.guid;z.uid=SSMMAG.guid;z.private_tu=new Date().getTime()-z.private_init_time;z.sid=SSMGF.u.sid;z.rid=SSMGF.rid;if(SSMGF.util.is.undefined(z.u)&&SSMGF.util.is.defined(document.location.href)&&document.location.href.length>0){z.u=SSMMAG.util.text.sanitize_url(document.location.href)}if(SSMGF.util.is.undefined(z.r)){if(SSMGF.util.is.defined(document.referrer)&&document.referrer.length>0){z.r=SSMMAG.util.text.sanitize_url(document.referrer)}if((SSMGF.util.is.undefined(z.r)||z.r=="")&&SSMGF.util.is.defined(n.History)){var F=n.History;try{z.r=SSMMAG.util.text.sanitize_url(F.getPrevious())}catch(x){}}}var H=document.getElementsByTagName("meta");for(i=0;i<H.length;i++){var G=SSMMAG.util.text.sanitize(H[i].getAttribute("content"));switch(H[i].getAttribute("property")){case"keywords":if(SSMGF.util.is.undefined(z.mkw)&&G!=""){z.mkw=G}break;case"description":if(SSMGF.util.is.undefined(z.md)&&G!=""){z.md=G}break}}if(SSMGF.util.is.undefined(z.mt)&&SSMGF.util.is.defined(document.getElementsByTagName("title"))&&SSMGF.util.is.defined(document.getElementsByTagName("title")[0])){z.mt=SSMMAG.util.text.sanitize(document.getElementsByTagName("title")[0].innerHTML)}j=true;SSMMAG.is_ready=true;m();return true}function D(G){if(!SSMMAG.is_ready){SSMMAG.on_ready(function(){SSMMAG.go(G)});SSMMAG.fn.init();return false}var F=C(G);var H=F.private_this_call;F=B(F);if(F.private_errors.length){w(F);return false}var x=a(F);try{t(G)}catch(I){}return x}function C(H){b++;var G=z;G.private_this_call=b;G.private_call_time=new Date().getTime();if(SSMGF.util.is.undefined(H)){var H={}}for(var F in H){switch(F){case"t":case"e":case"s":case"a":case"i":case"c":case"u":case"r":case"mt":case"mkw":case"md":var x=H[F];if(F=="u"||F=="r"){x=SSMMAG.util.text.sanitize_url(x)}else{if(F=="mt"||F=="mkw"||F=="md"){x=SSMMAG.util.text.truncate(x,255);x=SSMMAG.util.text.sanitize(x)}}G[F]=x;break;case"x":break;default:break}}return G}function B(x){if(SSMGF.util.is.undefined(x.e)||x.e<1){x.private_errors.push("An event is required, and must be greater or equal to 1.")}return x}function a(H){if(SSMGF.u.has_dnt||SSMGF.u.guid==""){return false}if(SSMGF.util.is.undefined(H)){H.private_errors.push("No pixel object to attach.");return false}var F=H.private_this_call;var L=d();var G=document.createElement("img");var J=L.scheme+"://"+L.host+"/p/magnum.gif?";for(var M in H){if(H.hasOwnProperty(M)&&M.indexOf("private_")<0&&H[M]){J=J+M+"="+H[M]+"&"}}J=J.slice(0,-1);var K=document.getElementsByTagName("body")[0];var I=K.getElementsByTagName("img");var N=false;for(i in I){if(I[i].className!=="ssm-magnum-pixel"){continue}var x=I[i].src;if(SSMGF.util.is.defined(x)&&typeof(x)=="string"){x=x.replace(/&tu=\w+&tp=\w+/g,"")}if(x==J){N=true;break}}if(N){H.private_errors.push("Duplicate pixel request.",F)}else{H.private_tp=new Date().getTime()-H.private_init_time;J=J+"&tu="+H.private_tu+"&tp="+H.private_tp;G.setAttribute("src",J);G.setAttribute("class","ssm-magnum-pixel");G.setAttribute("style","display:none;");K.appendChild(G)}if(H.private_errors.length){w(H);return false}return true}function t(M){var H=C(M);if(SSMGF.util.is.defined(M.s)){H.s=parseInt(M.s,10)}if(SSMGF.util.is.defined(M.e)){H.e=parseInt(M.e,10)}A.pixel_object=H;var L={};var G=SSMGF.util.text.get_value_from_key_value_pair("SSM_MAG_CAP",document.cookie)||{};if(G==="1"||G===1){G={};G[3]=1}else{if(typeof(G)==="string"){G=SSMGF.util.ssm.decode(G)}}A.mag_cap=G;if(typeof(A.ignore)==="object"&&A.ignore.length>0&&SSMGF.util.is.in_array(A.ignore,H.s)!==-1){return}if(typeof(A.allow)==="object"&&A.allow.length>0&&SSMGF.util.is.in_array(A.allow,H.s)===-1){return}if(SSMGF.util.is.defined(G[H.s])&&A.check_magcap){return}if(H.s==3){var N=document.cookie;N=N.replace(/&/g,"###");N=SSMGF.util.text.get_value_from_key_value_pair(atob("TVlBVVRPVFJBREVS"),N);if(SSMGF.util.is.defined(N)){N=N.replace(/###/g,"&");N=N.replace(/"/g,"");N=N.replace(/\s/g,"");L.d=f(SSMGF.util.text.get_value_from_key_value_pair("un",N),"d");s(L.d)}}if(SSMGF.util.is.undefined(L.d)||SSMGF.util.is.empty_str(L.d)){var F=document.getElementsByTagName("input");for(item in F){if(SSMGF.util.is.undefined(F[item])||typeof(F[item].getAttribute)!=="function"){continue}var J=f(F[item].value,"d");if(F[item].getAttribute("type")=="email"){c(F[item],"d");if(J){s(J)}}else{var K=(SSMGF.util.is.defined(F[item].getAttribute("name"))?F[item].getAttribute("name"):false),I=(SSMGF.util.is.defined(F[item].getAttribute("id"))?F[item].getAttribute("id"):false);if(F[item].getAttribute("type")=="text"&&K&&K.indexOf("email")!==-1){c(F[item],"d");if(J){s(J)}}else{if(F[item].getAttribute("type")=="text"&&I&&I.indexOf("email")!==-1){c(F[item],"d");if(J){s(J)}}}}}}return true}function m(){if(h.length>0){for(var x=0;x<h.length;x++){try{h[x].call(n,[])}catch(F){}}h=Array()}}function w(F){var H=F.private_errors,x=10;while(H.length&&x>0){var G=H.shift();i--}F.private_errors=Array();return true}function g(){var G=document.getElementsByTagName("script"),L="ssm-magnum-pixel",F=y,H="http",K="scripts/"+L+".min.js",J={};for(i=G.length;i>0;i--){var I=G[i];if(SSMGF.util.is.defined(I)&&(I.src.indexOf(L+".")>=0)){var x=I.src.split("/");H=x.shift();H=H.substring(0,H.length-1);x.shift();F=x.shift();K=x.join("/");break}}J.host=F;J.scheme=H;J.path=K;return J}function d(){var F=g();var x=F.host.replace("cdn.","");x=x.replace("tracking.","");if(x.indexOf(".dev.")!==-1){x="tracking."+x}F.host=x;return F}function f(G,F){var x=SSMGF.util.text.trim(G.toLowerCase());switch(F){case"a":case"b":case"c":x=x.replace(/,/g,"");break;case"d":x=x.replace(/\s/g,"");if(!o(x)){x=""}break;case"e":x=x.replace(/[^0-9Xx\+]/g,"");break;default:return"";break}if(x!=""){x=SSMGF.util.base64.encode(x)}return x}function o(x){return/^.+@.+\..+$/.test(x)}function c(G,F){if(!SSMGF.util.is.defined(F)){var F="d"}try{if(G.addEventListener){G.addEventListener("blur",function(){s(f(G.value,F))},true)}else{if(G.attachEvent){G.attachEvent("onblur",function(){s(f(G.value,F))},true)}}}catch(x){}}function s(H){if(SSMGF.util.is.empty_str(H)){return}if(A.captured.length>0&&SSMGF.util.is.in_array(A.captured,H)!==-1){return}else{if(H){A.captured[A.captured.length]=H}}var F={};F.d=H;for(p in F){if(F[p]==""){delete F[p]}}if(SSMGF.util.is.empty_obj(F)){}else{var G=A.pixel_object;try{delete G[u];delete G[r]}catch(I){}G.x=encodeURIComponent(SSMGF.util.json.encode(F));A.mag_cap[G.s]=1;document.cookie="SSM_MAG_CAP="+SSMGF.util.ssm.encode(A.mag_cap)+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/;";if(!a(G)){w(G)}}return true}return{init:function(){return e()},go:function(x){return D(x)},add_callback:function(F,x){return v(F,x)}}})(window);if(SSMMAG.on_ready==null){SSMMAG.on_ready=SSMMAG.fn.add_callback}if(SSMMAG.go==null){SSMMAG.go=SSMMAG.fn.go}var ssm_magnum_pixel=SSMMAG;SSMMAG.initialize=SSMMAG.go;SSMMAG.fn.init();