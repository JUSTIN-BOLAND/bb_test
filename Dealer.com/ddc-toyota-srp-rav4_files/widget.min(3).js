!function(a,e){"use strict";var t=function(a){return"undefined"!=typeof dataLayer&&dataLayer.push?(dataLayer.push(a),!0):!1};a(document).ready(function(){e.dataLayer.client.browser=navigator.appCodeName,e.dataLayer.client.browserVersion=navigator.appVersion,e.dataLayer.client.browserUser=navigator.userAgent,e.dataLayer.client.browserPlatform=navigator.platform,e.dataLayer.client.pixelResolution=screen.pixelDepth,e.dataLayer.client.screenWidth=screen.width,e.dataLayer.client.screenHeight=screen.height;var i=new Date,r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=i.getUTCMonth()+1;9>=n&&(n="0"+n);var d=i.getUTCDate();9>=d&&(d="0"+d);var o=i.getUTCFullYear();Date.prototype.getHoursTwoDigits=function(){var a=this.getHours();return 10>a?"0"+a.toString():a.toString()},Date.prototype.getMinutesTwoDigits=function(){var a=this.getMinutes();return 10>a?"0"+a.toString():a.toString()},Date.prototype.getSecondsTwoDigits=function(){var a=this.getSeconds();return 10>a?"0"+a.toString():a.toString()},e.dataLayer.date.currentTime=i,e.dataLayer.date.date=o+"-"+n+"-"+d,e.dataLayer.date.dayOfWeek=r[i.getDay()],e.dataLayer.date.time=i.getHoursTwoDigits()+":"+i.getMinutesTwoDigits()+":"+i.getSecondsTwoDigits(),e.dataLayer.date.timeZoneOffSet=i.getTimezoneOffset();var s=a(".ddc-content.special").length;e.dataLayer.page.attributes.specialsCountPerCategory=s,e.dataLayer.events={};var c,l={},v=[],m=a("body");e.dataLayer.topics={},e.dataLayer.topics.dataFormTrackingId=a("[data-form-tracking-id]"),e.dataLayer.topics.dataSlideType=a("[data-slide-type]"),e.dataLayer.topics.dataClickToCall=a("[data-click-to-call]"),e.dataLayer.topics.dataMapTypeId=a("[data-map-type-id]"),e.dataLayer.topics.dataIncentiveId=a("[data-incentive-id]"),e.dataLayer.topics.socialHeaderButtonId=a("[data-social-header-button-id]"),e.dataLayer.topics.linksShareId=a("[data-links-share-link-id]"),e.dataLayer.topics.dataVin="[data-vin]",e.dataLayer.topics.ajaxFormConfirm="ajaxFormConfirm",e.dataLayer.topics.mycarsSave="[data-mycars-save]",e.dataLayer.topics.ajaxContentLoaded="ajaxDialogComplete slideOpen",e.dataLayer.topics.dataCompareId="[data-compare-id]";var y=function(e){var t=e.parents(".ui-dialog").find(".ui-dialog-title").text()||e.parents("[data-widget-id]").find("h1").text()||"";return a.trim(t)},f=function(a){var t=e.dataLayer.vehicles;for(var i in t){var r=t[i];if(r.vin==a)return{vin:r.vin,make:r.make,model:r.model,modelYear:r.modelYear,bodyStyle:r.bodyStyle,trim:r.trim,exteriorColor:r.exteriorColor}}return{vin:"",make:"",model:"",modelYear:"",bodyStyle:"",trim:"",exteriorColor:""}};e.dataLayer.events.form=e.dataLayer.events.form||{},e.dataLayer.events.form.initiation=function(){var e=a(this).closest("form"),i=e.data("form-tracking-type"),r=a(this).data("form-tracking-id"),n=y(e),d={trackingId:r,formTitle:n,element:this};if("typedSearch"!==i&&(!l[r]||void 0==l[r])){l[r]=!0,v[r]=(new Date).getTime();var o={event:"ddc.form.initiation",eventData:d};t(o)}},e.dataLayer.events.form.submission=function(){var i=a(this).closest("form"),r=i.data("validator"),n=i.data("form-tracking-id"),d=i.find("input[name='custom.form.id']").val(),o=i.data("form-tracking-type"),s=i.find("input[name='search']").val(),c=i.find("input[data-id='contact.address.postalCode']"),l=i.find("select[data-id='contact.preferredContact']"),m=(new Date).getTime(),f=m-v[n],p=y(i),u=i.find('[name="dl.widgetName"]'),h={trackingId:n,customFormId:d,currentTime:m,elapsedTime:f,formTitle:p,element:this};if(e.dataLayer.confirmation.formTitle=p,u.size()>0&&""===u.val()&&u.val(p),"typedSearch"===o){h.typedSearchContent=s;var k={event:"ddc.form.typedSearch",eventData:h};t(k)}else if(r){h.zip=a(c).val()||"",h.preferredContact=a(l).val()||"",h.validate=r.checkValidity();var k={event:"ddc.form.submission",eventData:h};t(k)}else if(void 0===r){h.validate=!1;var k={event:"ddc.form.submission",eventData:h};t(k)}},e.dataLayer.events.form.ajaxFormConfirm=function(e,i){var r=a(i).closest("form"),n=r.find("select[data-id='contact.preferredContact']"),d=r.find("input[data-id='contact.address.postalCode']"),o=r.data("form-tracking-id"),s=y(r),c=r.attr("action").split("?")[0]||"",l="",v="";d&&(l=a(d).val()),n&&(v=a(n).val());var m={confirmPath:c,element:i,formTitle:s,preferredContact:v,trackingId:o,zip:l},f={event:"ddc.form.ajaxFormConfirm",eventData:m};t(f)},e.dataLayer.events.form.change=function(){var e=a(this).closest("form"),i=e.hasClass("facetbrowse-ajax-form"),r=e.hasClass("inventory-search-lead-form"),n=this.tagName,d="SELECT"===n;if(d&&(i||r)){var o=e.find("select:visible"),s={element:this};a.each(o,function(){var e=a(this).val();if(e){var t=a(this).attr("name");s[t]=e}});var c=i?"facetBrowseChange":"inventorySearchLeadChange",l={event:"ddc.form."+c,eventData:s};t(l)}},e.dataLayer.events.slideshow=e.dataLayer.events.slideshow||{},e.dataLayer.events.slideshow.click=function(){var e={event:"ddc.slideshow.click",eventData:{type:a(this).data("slide-type"),position:a(this).data("slide-position"),name:a(this).data("slide-label"),element:this}};t(e)},e.dataLayer.events.link=e.dataLayer.events.link||{},e.dataLayer.events.link.clickToCall=function(){var e=a(this).data("click-to-call"),i={event:"ddc.link.clickToCall",eventData:{clickToCallDepartment:e,element:this}};t(i)},e.dataLayer.events.link.incentive=function(){a(this).hasClass("dialog")&&(a(document).trigger("modulesRefresh",{modules:{dialog:e.modules.dialog}}),void 0!==e.dialogs&&c());var i=a(this).data("incentive-id"),r=a(this).data("incentive-name"),n={event:"ddc.link.offerClick",eventData:{offerId:i,offerName:r,element:this}};t(n)},e.dataLayer.events.maps=function(){var a={event:"ddc.maps"};t(a)},e.dataLayer.events.link.socialHeader=function(){var e={event:"ddc.link.socialHeaderClick",eventData:{service:a(this).attr("title"),url:a(this).attr("href"),element:this}};t(e)},e.dataLayer.events.link.share=function(){var e={event:"ddc.link.socialShare",eventData:{service:a(this).attr("title"),url:a(this).attr("href"),element:this}};t(e)},e.dataLayer.events.link.hproduct=function(e,t){var i;if(i=a(this===document?t.target:this),!i.hasClass("hproduct")){var r=i.parents(".hproduct");r.length>0&&(i=r)}var n={event:"ddc.link.hproductClick",eventData:{vin:i.data("vin"),make:i.data("make"),model:i.data("model"),year:i.data("year"),bodyStyle:i.data("bodystyle"),trim:i.data("trim"),exteriorColor:i.data("exteriorcolor"),position:i.data("index-position"),type:i.data("type"),internetPrice:i.data("internetprice"),msrp:i.data("msrp"),element:i[0]}};dataLayer.push(n)},e.dataLayer.events.link.compare=function(){var e=a(this),i=e.data("compareId"),r=f(i),n=e.data("index-position"),d=e.data("type"),o={event:"ddc.link.comparePageClick",eventData:{vin:i,make:r.make,model:r.model,year:r.modelYear,bodyStyle:r.bodyStyle,trim:r.trim,exteriorColor:r.exteriorColor,position:n,type:d,element:e[0]}};t(o)},e.dataLayer.events.link.mycarsSave=function(){var i,r=e.dataLayer.page.pageInfo.isVlp,n=e.dataLayer.page.pageInfo.isVdp;if(r){var d=a(this).parents(".hproduct").data("vin");i=f(d)}else n&&(i=e.dataLayer.vehicles[0]);var o={event:"ddc.link.mycarsSave",eventData:{vin:i.vin||"",make:i.make||"",model:i.model||"",year:i.modelYear||"",element:this}};t(o)},e.dataLayer.events.dialog=e.dataLayer.events.dialog||{},e.dataLayer.events.dialog.ajaxContentLoaded=function(a,i,r,n){var d,o=!1;if(n)o=n.find("form").size()>0,d=n;else if(e.dialogs&&(i||r)){var s=e.dialogs[i]||e.dialogs[r];o=s&&s.size()>0&&s.find("form").size()>0||!1,d=s}var c={event:"ddc.dialog.ajaxContentLoaded",eventData:{hasForm:o,element:d}};t(c)},e.dataLayer.eventSubscriber=function(t){if(!e.dataLayer.topics.hasOwnProperty(t))return!1;switch(t){case"dataIncentiveId":m.on("click","[data-incentive-id]",e.dataLayer.events.link.incentive);break;case"dataClickToCall":m.on("click","[data-click-to-call]",e.dataLayer.events.link.clickToCall);break;case"dataSlideType":m.on("click","[data-slide-type]",e.dataLayer.events.slideshow.click);break;case"dataMapTypeId":a("body *[data-map-type-id]").length&&e.dataLayer.events.maps();break;case"socialHeaderButtonId":m.on("click","[data-social-header-button-id]",e.dataLayer.events.link.socialHeader);break;case"linksShareId":m.on("click","[data-links-share-link-id]",e.dataLayer.events.link.share);break;case"dataVin":a(document).on("hproductClick",e.dataLayer.events.link.hproduct),m.on("click","[data-showroom-listing-vehicle-id],[data-modelselector-vehicle-id],.inventoryList .hproduct .photo,.inventoryList .hproduct .url,.inventory-similar-default .hproduct .media a,.inventory-similar-default .hproduct .url,.inventory-similar-default .hproduct .view-link",e.dataLayer.events.link.hproduct);break;case"dataCompareId":m.on("click","[data-compare-id]",e.dataLayer.events.link.compare);break;case"dataFormTrackingId":m.on("click focus","[data-form-tracking-id]",e.dataLayer.events.form.initiation),m.on("click submit","[data-form-tracking-id] [type=submit]",e.dataLayer.events.form.submission),m.on("change","[data-form-tracking-id] input,[data-form-tracking-id] select",e.dataLayer.events.form.change);break;case"ajaxFormConfirm":a(document).on("ajaxFormConfirm",e.dataLayer.events.form.ajaxFormConfirm);break;case"mycarsSave":m.on("click","[data-mycars-save]",e.dataLayer.events.link.mycarsSave);break;case"ajaxContentLoaded":a(document).on("ajaxDialogComplete slideOpen ",e.dataLayer.events.dialog.ajaxContentLoaded)}};var c=function(){e.dataLayer.eventSubscriber("dataSlideType"),e.dataLayer.eventSubscriber("dataClickToCall"),e.dataLayer.eventSubscriber("dataFormTrackingId"),e.dataLayer.eventSubscriber("dataMapTypeId"),e.dataLayer.eventSubscriber("dataIncentiveId"),e.dataLayer.eventSubscriber("socialHeaderButtonId"),e.dataLayer.eventSubscriber("linksShareId"),e.dataLayer.eventSubscriber("dataVin"),e.dataLayer.eventSubscriber("ajaxFormConfirm"),e.dataLayer.eventSubscriber("mycarsSave"),e.dataLayer.eventSubscriber("ajaxContentLoaded"),e.dataLayer.eventSubscriber("dataCompareId"),a(document).on("ddc-mega-menu-nav-ajax-load-complete",function(t){var i=a(t.target);i.on("click submit","[data-form-tracking-id] [type=submit]",e.dataLayer.events.form.submission)})};c()})}(jQuery,window.DDC);