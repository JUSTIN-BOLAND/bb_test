var vdpLeadType;var vdpLeadSrc;var lblImInterested;jQuery(function(a){ActivateButton("video");ActivateButton("ext");ActivateButton("int");ActivateButton("color");a("#firstName").focus(function(){vehicleTDDS("firstName")});a(".vdpVehicleSpecial").each(function(){var b=a(this).attr("show");b+=specialLeadSource;a(this).attr("show",b);ActivateMagnific(a(this),"special",b)});$('a[data-toggle="popover"]').each(function(){var c=$(this).closest('[id^="content-main"]').attr("id");if(a.browser.mobile){$(this).popover({html:true,trigger:"click",animation:false,container:"#"+c,placement:"right"})}else{var b=this;$(this).popover({html:true,trigger:"manual",animation:false,container:"#"+c,placement:"left"}).on("mouseenter",function(){$(b).popover("show");$("#"+c+" .popover").on("mouseleave",function(){$(b).popover("hide")})}).on("mouseleave",function(){setTimeout(function(){if(!$(".popover:hover").length){$(b).popover("hide")}},5)})}});$("body").on("shown.bs.popover",function(){$(".modal-link").click(function(b){b.preventDefault();var c=a("#rebateModal");c.on("show.bs.modal",function(){a("iframe#rebateIframe").removeAttr("src");a("iframe#rebateIframe").attr("src",b.currentTarget.href)}).modal()})})});jQuery(window).load(function(){if(jQuery("#RecentlyViewedVehicleHolder")){var d="api/RecentlyViewedVehicles/RecentViews";var c="?dealerId="+dealerId;if(location.search.toLowerCase().indexOf("framein=1")>-1){c=c+"&FrameIn=1"}d=d+c;jQuery.ajax({url:d,type:"Get",dataType:"json",contentType:"application/json; charset=utf-8",success:function(g){if(g.$values.length>0){var h=0;jQuery("#recentViewsLoader").hide();jQuery.each(g.$values,function(i,k){var j='<div id="recentVehicle-'+i+'" class="col-md-2 recentViews" style="display: none;">'+k+"</div>";setTimeout(function(){jQuery("#RecentlyViewedVehicleHolder").prepend(j);jQuery("#recentVehicle-"+i).show("fast")},h+=400)})}else{jQuery("#recentlyViewedVehicles").hide()}}})}if(max_Recent!=null){var b=new Date();var a=new Date();var e=["January","February","March","April","May","June","July","August","September","October","November","December"];b.setTime(b.getTime()+(expDays*24*60*60*1000));f(pageUrl,b,e[a.getMonth()]+" "+a.getDay()+", "+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds())}function f(u,k,j){var g=null;var w=new Array();var n=u.split("-");var x=n[n.length-1];var o=this.GetRecentlyViewedCookie("DLRN_RecentlyViewedCookie_"+pageDealerId);if(o!=null){var p=o.trim().split("|");var h=p.length;if(h>max_Recent){p.splice(0,h-max_Recent)}for(var l=0;l<p.length;l++){var t=p[l].trim();if(g==null){g=t}else{g=g+" | "+t}if(x==(t.substring(0,t.indexOf(" ")))){x=null}}if(h==max_Recent&&x!=null){g=null;var q=o.trim().split("|");q.splice(0,1);for(var l=0;l<q.length;l++){var m=q[l].trim();if(g==null){g=m}else{g=g+" | "+m}}}}if((x!=null&&o==null)||(x!=null&&o!=null)){w.push(x+" "+j);if(g==null){g=w[0]}else{g=g+" | "+w[0]}}setRecentlyVeiwedCookie("DLRN_RecentlyViewedCookie_"+pageDealerId,g,k,"/")}});function GetRecentlyViewedCookie(f){var b=f+"=";var a=b.length;var c=document.cookie.length;var d=0;while(d<c){var e=d+a;if(document.cookie.substring(d,e)==b){return getCookieVal(e)}d=document.cookie.indexOf(" ",d)+1;if(d==0){break}}return null}function getCookieVal(b){var a=document.cookie.indexOf(";",b);if(a==-1){a=document.cookie.length}return unescape(document.cookie.substring(b,a))}function createRecentlyViewedCookie(d,e,b){if(b>0){var a=new Date();a.setTime(a.getTime()+(b*24*60*60*1000));var c="; expires="+a.toGMTString()}else{var c=""}document.cookie=escape(d)+"="+escape(e)+c+"; path=/"}function setRecentlyVeiwedCookie(e,h){var b=setRecentlyVeiwedCookie.arguments;var a=setRecentlyVeiwedCookie.arguments.length;var d=(a>2)?b[2]:null;var f=(a>3)?b[3]:null;var c=(a>4)?b[4]:null;var g=(a>5)?b[5]:false;document.cookie=e+"="+escape(h)+((d==null)?"":("; expires="+new Date(d).toGMTString()))+((f==null)?"":("; path="+f))+((c==null)?"":("; domain="+c))+((g==true)?"; secure":"")}jQuery(document).ready(function(){var a={additionalData:function(c){ExtractSource();var b=jQuery("#Interestedcomments").val();if(jQuery("#extraAmount").val()>""&&(vdpLeadSrc==22||vdpLeadSrc==25||vdpLeadSrc==165||vdpLeadSrc==166)){b+=" Would you accept "+jQuery("#extraAmount").val()+" for this vehicle? "}if((typeof spinCarUserReference=="string")&&spinCarUserReference.trim()!=""){b+=" SpinCar report: "+spinCarUserReference}b+=" I'm Interested : "+lblImInterested;return{LeadType:vdpLeadType,LeadSource:vdpLeadSrc,Comments:b,Vin:vehicleVin,VehicleYear:vehicleYear,VehicleMake:vehicleMake,VehicleModel:vehicleModel,VehicleTrim:vehicleTrim,VehicleId:vehicleid,DealerId:dealerId,AltDealerId:altId}},successCallback:function(b){var e=JSON.parse(b);var d=(e.leadSource.indexOf("GoGoCar")!==-1);var c;if(d){DealerOnTrack.event("Lead",e.leadId,e.leadSource,c,function(f){vehicleTDDS("");var g=$("#eprice_vehVin")[0].innerHTML;$("#gogocarhiddenlink_"+g)[0].click();$("#primaryButtonPageModal").modal("toggle")})}else{DealerOnTrack.event("Lead",e.leadId,e.leadSource,c,function(f){vehicleTDDS("");window.location.href="/thankyou.aspx?lid="+f})}}};DealeronLead.addSubmissionMethod("imInterestedSubmit",a);DealeronLead.initialize("#imInterested","imInterestedSubmit");$("#Interestedtxtfirst_name").on("focusout",function(){DealeronLead.begin();if(typeof(trackerHook)!=="undefined"){trackerHook(252)}})});function ExtractSource(){var a=jQuery("input[name=radioGroup]:checked",".form-horizontal").attr("class");if(typeof(a)==="undefined"){a="generalLead";lblImInterested=jQuery("input[name=radioGroup].generalLead",".form-horizontal").next().text()}else{lblImInterested=$("input[name=radioGroup]:checked",".form-horizontal").next().text()}switch(a){case"generalLead":setLeadTypeAndSrc(["22","25"],["165","166"]);break;case"tradeLead":setLeadTypeAndSrc(["281","282"],["281","282"]);break;case"financeLead":setLeadTypeAndSrc(["162","279"],["163","280"]);break;case"quoteLead":setLeadTypeAndSrc(["178","179"],["175","180"]);break}}function setLeadTypeAndSrc(a,c){var b=jQuery.browser.mobile;if(typeof(vehicleType)!=="undefined"&&vehicleType.toLowerCase()==="used"){vdpLeadType=2;if(b){vdpLeadSrc=c[1]}else{vdpLeadSrc=a[1]}}else{vdpLeadType=1;if(b){vdpLeadSrc=c[0]}else{vdpLeadSrc=a[0]}}}function socialNetwork(d){var c,f,b,e,a;b=encodeURIComponent(document.location.href);e=encodeURIComponent(document.title);switch(d){case"twitter":f="http://twitter.com/home?status=Looking at: "+b;break;case"facebook":f="http://www.facebook.com/sharer.php?u="+b+"&t="+e;break;case"myspace":e=document.title;a='<img src="'+vehiclePhoto+'" /><br><p>'+e+"</p>";f="http://www.myspace.com/index.cfm?fuseaction=postto&t="+e+"&c="+a+"&u="+b;f=encodeURI(f);break;case"del":f="http://del.icio.us/post?url="+b+"&title="+e;break;case"digg":f="http://digg.com/submit?phase=2&url="+b;break;case"linkedin":f="http://www.linkedin.com/shareArticle?mini=true&url="+b+"&title="+e+"&source="+b+"&summary=";break}c=window.open(f,"sharer","toolbar=0,status=0,scrollbars=1,width=626,height=436")}function openForm(b){var a="http://"+window.location.host;if(b==="preApproved"){screen_width=window.screen.availWidth;screen_height=window.screen.availHeight;left_point=parseInt(screen_width/2)-(600);preApproveWindow=window.open(preApproveLink,"","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=1,resizable=no,copyhistory=yes,width=1200,height=1500");preApproveWindow.moveTo(left_point,0)}if(b==="certificate"){var d=certificateUrl;var c="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=1,resizable=no,copyhistory=yes,width="+certificateWidth+",height="+certificateHeight;screen_width=window.screen.availWidth;screen_height=window.screen.availHeight;left_point=parseInt(screen_width/2)-(certificateWidth);easWindow=window.open(d,"",c);easWindow.moveTo(left_point,40)}}function ActivateButton(c){var b="http://"+window.location.host+"/flvvideo.aspx?type=swf&vin="+vehicleVin+"&swf=";if(c==="video"){if(hasVideo&&videoFileName!==""){var a="http://"+window.location.host+videoFileName;$("#videoBtn, #videoBtnMobile").click(function(){DealerOnTrack.event("Video Plays","vehicledetails"+vehicleType,vehicle+"-"+vehicleVin)});ActivateMagnific(jQuery("#videoBtn"),"video",videoFileName);jQuery("#videoBtnMobile").click(function(){window.open(videoFileName)});jQuery("#videoBtn, #videoBtnMobile").prop("disabled",false)}else{jQuery("#videoBtn, #videoBtnMobile").prop("disabled",true)}}if(c==="ext"){if(hasIzmo&&izmoFileName!==""){var a=b+izmoFileName;ActivateMagnific(jQuery("#ExtBtn"),"iframe",a)}else{if(hasEvox){var a='<iframe margin="25% auto 0" frameborder="0" width="560" scrolling="no" src="http://www.eautosavings.com/vvc_dealeron.asp?Year='+vehicleYear+"&Make="+vehicleMake+"&Model="+vehicleModel+"&type=ext&dId="+dealerId+'" id="frm_vvc"/>';ActivateMagnific(jQuery("#ExtBtn"),"custom",a)}else{jQuery("#ExtBtn").css("opacity","0.5").attr("disabled","disabled")}}}if(c==="int"){if(hasIzmo&&intIzmoFileName!==""){var a=b+intIzmoFileName;ActivateMagnific(jQuery("#IntBtn"),"iframe",a)}else{if(hasEvox){var a='<iframe margin="25% auto 0" frameborder="0" width="50%" scrolling="no" src="http://www.eautosavings.com/vvc_dealeron.asp?Year='+vehicleYear+"&Make="+vehicleMake+"&Model="+vehicleModel+"&type=int&dId="+dealerId+'" id="frm_vvc"/>';ActivateMagnific(jQuery("#IntBtn"),"custom",a)}else{jQuery("#IntBtn").css("opacity","0.5").attr("disabled","disabled")}}}if(c==="color"){if(colorIzmoFileName!==""){var a=b+colorIzmoFileName;ActivateMagnific(jQuery("#colorBtn"),"iframe",a)}else{jQuery("#colorBtn").css("opacity","0.5").attr("disabled","disabled")}}}jQuery(".modal-link").click(function(a){a.preventDefault();var b=jQuery("#rebateModal");b.on("show.bs.modal",function(){jQuery("iframe#rebateIframe").removeAttr("src");jQuery("iframe#rebateIframe").attr("src",a.currentTarget.href)}).modal()});function ActivatePhotos(){jQuery("#vehicleImgLarge").each(function(){jQuery(this).magnificPopup({delegate:".item .row",type:"image",gallery:{enabled:true},callbacks:{buildControls:function(){if(typeof(this.arrowLeft)!=="undefined"&&!typeof(this.arrowRight)!=="undefined"){this.contentContainer.append(this.arrowLeft.add(this.arrowRight))}}}})});jQuery("#vehicleImgSmall").each(function(){jQuery(this).magnificPopup({delegate:".item .row",type:"image",gallery:{enabled:true},callbacks:{buildControls:function(){if(typeof(this.arrowLeft)!=="undefined"&&!typeof(this.arrowRight)!=="undefined"){this.contentContainer.append(this.arrowLeft.add(this.arrowRight))}}}})});jQuery("#vehicleImgThumbnail").each(function(){jQuery(this).magnificPopup({delegate:".item .row .thumbs",type:"image",gallery:{enabled:true},callbacks:{buildControls:function(){if(typeof(this.arrowLeft)!=="undefined"&&!typeof(this.arrowRight)!=="undefined"){this.contentContainer.append(this.arrowLeft.add(this.arrowRight))}}}})})}jQuery("#pinterestIcon a").click(function(a){a.preventDefault();ResetTracker();trackerHook(socialShareTrackerEvent,"click");window.open(jQuery(this).attr("href"),"popupWindow","width=630,height=455,scrollbars=yes")});jQuery(".modal-link").click(function(a){a.preventDefault();var b=jQuery("#rebateModal");b.on("show.bs.modal",function(){jQuery("iframe#rebateIframe").removeAttr("src");jQuery("iframe#rebateIframe").attr("src",a.currentTarget.href)}).modal()});function ActivateMagnific(b,c,a){if(a===""){return}switch(c){case"iframe":jQuery(b).magnificPopup({type:"iframe",midClick:true,items:{src:a}});break;case"special":jQuery(b).magnificPopup({items:{type:"iframe",src:a},iframe:{markup:'<div class="mfp-iframe-scaler specialMagnific"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen>            </iframe></div>'},callbacks:{open:function(){ResetTracker();trackerHook(specialLinkTrackerEvent,"click")}}});break;case"video":jQuery(b).magnificPopup({items:{type:"iframe",midClick:true,src:a},iframe:{markup:'<div class="mfp-iframe-scaler vehicleVidMagnific"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen scrolling="no">            </iframe></div>'},mainClass:"vehicleVidMagnificContainer"})}}function openWindowSticker(f,b){var d=["mitsubishi"];var c=$.inArray(b.toLowerCase(),d)>-1;screen_width=window.screen.availWidth;screen_height=window.screen.availHeight;left_point=parseInt(screen_width/2)-(500);var e="?url="+encodeURIComponent(f)+"&make="+b;var a=c?"api/inventory/GetStickers/"+e:f;brochureWindow=window.open(a,"","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=1,resizable=yes,copyhistory=yes,width=1000,height=1500");brochureWindow.moveTo(left_point,0)}function vehicleTDDS(a){if(a=="firstName"){ResetTracker();if(vehicleType.toLowerCase()=="used"){trackerHook(25)}else{trackerHook(22)}}};