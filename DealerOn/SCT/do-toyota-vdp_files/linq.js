"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};dealeron.runtime.define([],function(){var t={Identity:function(t){return t},True:function(){return!0},Blank:function(){}},e={Boolean:_typeof(!0),Number:_typeof(0),String:_typeof(""),Object:_typeof({}),Undefined:"undefined",Function:_typeof(function(){})},n={createLambda:function(e){return e?e:t.Identity},isIEnumerable:function(t){if(("undefined"==typeof Enumerator?"undefined":_typeof(Enumerator))!==e.Undefined)try{return new Enumerator(t),!0}catch(n){}return!1},defineProperty:null!=Object.defineProperties?function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}:function(t,e,n){t[e]=n},compare:function(t,e){return t===e?0:t>e?1:-1},dispose:function(t){null!=t&&t.dispose()}},r={Before:0,Running:1,After:2},o=function(t,e,n){var o=new u,i=r.Before;this.current=o.current,this.moveNext=function(){try{switch(i){case r.Before:i=r.Running,t();case r.Running:return!!e.apply(o)||(this.dispose(),!1);case r.After:return!1}}catch(n){throw this.dispose(),n}},this.dispose=function(){if(i==r.Running)try{n()}finally{i=r.After}}},u=function(){var t=null;this.current=function(){return t},this.yieldReturn=function(e){return t=e,!0},this.yieldBreak=function(){return!1}},i=function(t){this.getEnumerator=t};i.Utils={},i.Utils.createLambda=function(t){return n.createLambda(t)},i.Utils.createEnumerable=function(t){return new i(t)},i.Utils.createEnumerator=function(t,e,n){return new o(t,e,n)},i.Utils.extendTo=function(t){var e,r=t.prototype;t===Array?(e=s.prototype,n.defineProperty(r,"getSource",function(){return this})):(e=i.prototype,n.defineProperty(r,"getEnumerator",function(){return i.from(this).getEnumerator()}));for(var o in e){var u=e[o];r[o]!=u&&(null!=r[o]&&(o+="ByLinq",r[o]==u)||u instanceof Function&&n.defineProperty(r,o,u))}},i.choice=function(){var e=arguments;return new i(function(){return new o(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return this.yieldReturn(e[Math.floor(Math.random()*e.length)])},t.Blank)})},i.cycle=function(){var e=arguments;return new i(function(){var n=0;return new o(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return n>=e.length&&(n=0),this.yieldReturn(e[n++])},t.Blank)})},i.empty=function(){return new i(function(){return new o(t.Blank,function(){return!1},t.Blank)})},i.from=function(r){if(null==r)return i.empty();if(r instanceof i)return r;if(("undefined"==typeof r?"undefined":_typeof(r))==e.Number||("undefined"==typeof r?"undefined":_typeof(r))==e.Boolean)return i.repeat(r,1);if(("undefined"==typeof r?"undefined":_typeof(r))==e.String)return new i(function(){var e=0;return new o(t.Blank,function(){return e<r.length&&this.yieldReturn(r.charAt(e++))},t.Blank)});if(("undefined"==typeof r?"undefined":_typeof(r))!=e.Function){if(_typeof(r.length)==e.Number)return new s(r);if(!(r instanceof Object)&&n.isIEnumerable(r))return new i(function(){var e,n=!0;return new o(function(){e=new Enumerator(r)},function(){return n?n=!1:e.moveNext(),!e.atEnd()&&this.yieldReturn(e.item())},t.Blank)});if(("undefined"==typeof Windows?"undefined":_typeof(Windows))===e.Object&&_typeof(r.first)===e.Function)return new i(function(){var e,n=!0;return new o(function(){e=r.first()},function(){return n?n=!1:e.moveNext(),e.hasCurrent?this.yieldReturn(e.current):this.yieldBreak()},t.Blank)})}return new i(function(){var e=[],n=0;return new o(function(){for(var t in r){var n=r[t];n instanceof Function||!Object.prototype.hasOwnProperty.call(r,t)||e.push({key:t,value:n})}},function(){return n<e.length&&this.yieldReturn(e[n++])},t.Blank)})},i.make=function(t){return i.repeat(t,1)},i.matches=function(e,n,r){return null==r&&(r=""),n instanceof RegExp&&(r+=n.ignoreCase?"i":"",r+=n.multiline?"m":"",n=n.source),r.indexOf("g")===-1&&(r+="g"),new i(function(){var u;return new o(function(){u=new RegExp(n,r)},function(){var t=u.exec(e);return!!t&&this.yieldReturn(t)},t.Blank)})},i.range=function(e,n,r){return null==r&&(r=1),new i(function(){var u,i=0;return new o(function(){u=e-r},function(){return i++<n?this.yieldReturn(u+=r):this.yieldBreak()},t.Blank)})},i.rangeDown=function(e,n,r){return null==r&&(r=1),new i(function(){var u,i=0;return new o(function(){u=e+r},function(){return i++<n?this.yieldReturn(u-=r):this.yieldBreak()},t.Blank)})},i.rangeTo=function(e,n,r){return null==r&&(r=1),new i(e<n?function(){var u;return new o(function(){u=e-r},function(){var t=u+=r;return t<=n?this.yieldReturn(t):this.yieldBreak()},t.Blank)}:function(){var u;return new o(function(){u=e+r},function(){var t=u-=r;return t>=n?this.yieldReturn(t):this.yieldBreak()},t.Blank)})},i.repeat=function(e,n){return null!=n?i.repeat(e).take(n):new i(function(){return new o(t.Blank,function(){return this.yieldReturn(e)},t.Blank)})},i.repeatWithFinalize=function(t,e){return t=n.createLambda(t),e=n.createLambda(e),new i(function(){var n;return new o(function(){n=t()},function(){return this.yieldReturn(n)},function(){null!=n&&(e(n),n=null)})})},i.generate=function(e,r){return null!=r?i.generate(e).take(r):(e=n.createLambda(e),new i(function(){return new o(t.Blank,function(){return this.yieldReturn(e())},t.Blank)}))},i.toInfinity=function(e,n){return null==e&&(e=0),null==n&&(n=1),new i(function(){var r;return new o(function(){r=e-n},function(){return this.yieldReturn(r+=n)},t.Blank)})},i.toNegativeInfinity=function(e,n){return null==e&&(e=0),null==n&&(n=1),new i(function(){var r;return new o(function(){r=e+n},function(){return this.yieldReturn(r-=n)},t.Blank)})},i.unfold=function(e,r){return r=n.createLambda(r),new i(function(){var n,u=!0;return new o(t.Blank,function(){return u?(u=!1,n=e,this.yieldReturn(n)):(n=r(n),this.yieldReturn(n))},t.Blank)})},i.defer=function(t){return new i(function(){var e;return new o(function(){e=i.from(t()).getEnumerator()},function(){return e.moveNext()?this.yieldReturn(e.current()):this.yieldBreak()},function(){n.dispose(e)})})},i.prototype.traverseBreadthFirst=function(t,e){var r=this;return t=n.createLambda(t),e=n.createLambda(e),new i(function(){var u,c=0,a=[];return new o(function(){u=r.getEnumerator()},function(){for(;;){if(u.moveNext())return a.push(u.current()),this.yieldReturn(e(u.current(),c));var r=i.from(a).selectMany(function(e){return t(e)});if(!r.any())return!1;c++,a=[],n.dispose(u),u=r.getEnumerator()}},function(){n.dispose(u)})})},i.prototype.traverseDepthFirst=function(t,e){var r=this;return t=n.createLambda(t),e=n.createLambda(e),new i(function(){var u,c=[];return new o(function(){u=r.getEnumerator()},function(){for(;;){if(u.moveNext()){var r=e(u.current(),c.length);return c.push(u),u=i.from(t(u.current())).getEnumerator(),this.yieldReturn(r)}if(c.length<=0)return!1;n.dispose(u),u=c.pop()}},function(){try{n.dispose(u)}finally{i.from(c).forEach(function(t){t.dispose()})}})})},i.prototype.flatten=function(){var e=this;return new i(function(){var r,u=null;return new o(function(){r=e.getEnumerator()},function(){for(;;){if(null!=u){if(u.moveNext())return this.yieldReturn(u.current());u=null}if(r.moveNext()){if(r.current()instanceof Array){n.dispose(u),u=i.from(r.current()).selectMany(t.Identity).flatten().getEnumerator();continue}return this.yieldReturn(r.current())}return!1}},function(){try{n.dispose(r)}finally{n.dispose(u)}})})},i.prototype.pairwise=function(t){var e=this;return t=n.createLambda(t),new i(function(){var r;return new o(function(){r=e.getEnumerator(),r.moveNext()},function(){var e=r.current();return!!r.moveNext()&&this.yieldReturn(t(e,r.current()))},function(){n.dispose(r)})})},i.prototype.scan=function(t,e){var r;null==e?(e=n.createLambda(t),r=!1):(e=n.createLambda(e),r=!0);var u=this;return new i(function(){var i,c,a=!0;return new o(function(){i=u.getEnumerator()},function(){if(a){if(a=!1,r)return this.yieldReturn(c=t);if(i.moveNext())return this.yieldReturn(c=i.current())}return!!i.moveNext()&&this.yieldReturn(c=e(c,i.current()))},function(){n.dispose(i)})})},i.prototype.select=function(t){if(t=n.createLambda(t),t.length<=1)return new p(this,null,t);var e=this;return new i(function(){var r,u=0;return new o(function(){r=e.getEnumerator()},function(){return!!r.moveNext()&&this.yieldReturn(t(r.current(),u++))},function(){n.dispose(r)})})},i.prototype.selectMany=function(t,e){var r=this;return t=n.createLambda(t),null==e&&(e=function(t,e){return e}),e=n.createLambda(e),new i(function(){var u,c=void 0,a=0;return new o(function(){u=r.getEnumerator()},function(){if(void 0===c&&!u.moveNext())return!1;do{if(null==c){var r=t(u.current(),a++);c=i.from(r).getEnumerator()}if(c.moveNext())return this.yieldReturn(e(u.current(),c.current()));n.dispose(c),c=null}while(u.moveNext());return!1},function(){try{n.dispose(u)}finally{n.dispose(c)}})})},i.prototype.where=function(t){if(t=n.createLambda(t),t.length<=1)return new l(this,t);var e=this;return new i(function(){var r,u=0;return new o(function(){r=e.getEnumerator()},function(){for(;r.moveNext();)if(t(r.current(),u++))return this.yieldReturn(r.current());return!1},function(){n.dispose(r)})})},i.prototype.choose=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r,u=0;return new o(function(){r=e.getEnumerator()},function(){for(;r.moveNext();){var e=t(r.current(),u++);if(null!=e)return this.yieldReturn(e)}return this.yieldBreak()},function(){n.dispose(r)})})},i.prototype.ofType=function(t){var n;switch(t){case Number:n=e.Number;break;case String:n=e.String;break;case Boolean:n=e.Boolean;break;case Function:n=e.Function;break;default:n=null}return null===n?this.where(function(e){return e instanceof t}):this.where(function(t){return("undefined"==typeof t?"undefined":_typeof(t))===n})},i.prototype.zip=function(){var t=arguments,e=n.createLambda(arguments[arguments.length-1]),r=this;if(2==arguments.length){var u=arguments[0];return new i(function(){var t,c,a=0;return new o(function(){t=r.getEnumerator(),c=i.from(u).getEnumerator()},function(){return!(!t.moveNext()||!c.moveNext())&&this.yieldReturn(e(t.current(),c.current(),a++))},function(){try{n.dispose(t)}finally{n.dispose(c)}})})}return new i(function(){var u,c=0;return new o(function(){var e=i.make(r).concat(i.from(t).takeExceptLast().select(i.from)).select(function(t){return t.getEnumerator()}).toArray();u=i.from(e)},function(){if(u.all(function(t){return t.moveNext()})){var t=u.select(function(t){return t.current()}).toArray();return t.push(c++),this.yieldReturn(e.apply(null,t))}return this.yieldBreak()},function(){i.from(u).forEach(n.dispose)})})},i.prototype.merge=function(){var t=arguments,e=this;return new i(function(){var r,u=-1;return new o(function(){r=i.make(e).concat(i.from(t).select(i.from)).select(function(t){return t.getEnumerator()}).toArray()},function(){for(;r.length>0;){u=u>=r.length-1?0:u+1;var t=r[u];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),r.splice(u--,1)}return this.yieldBreak()},function(){i.from(r).forEach(n.dispose)})})},i.prototype.join=function(e,r,u,c,a){r=n.createLambda(r),u=n.createLambda(u),c=n.createLambda(c),a=n.createLambda(a);var f=this;return new i(function(){var s,l,p=null,h=0;return new o(function(){s=f.getEnumerator(),l=i.from(e).toLookup(u,t.Identity,a)},function(){for(;;){if(null!=p){var t=p[h++];if(void 0!==t)return this.yieldReturn(c(s.current(),t));t=null,h=0}if(!s.moveNext())return!1;var e=r(s.current());p=l.get(e).toArray()}},function(){n.dispose(s)})})},i.prototype.groupJoin=function(e,r,u,c,a){r=n.createLambda(r),u=n.createLambda(u),c=n.createLambda(c),a=n.createLambda(a);var f=this;return new i(function(){var s=f.getEnumerator(),l=null;return new o(function(){s=f.getEnumerator(),l=i.from(e).toLookup(u,t.Identity,a)},function(){if(s.moveNext()){var t=l.get(r(s.current()));return this.yieldReturn(c(s.current(),t))}return!1},function(){n.dispose(s)})})},i.prototype.all=function(t){t=n.createLambda(t);var e=!0;return this.forEach(function(n){if(!t(n))return e=!1,!1}),e},i.prototype.any=function(t){t=n.createLambda(t);var e=this.getEnumerator();try{if(0==arguments.length)return e.moveNext();for(;e.moveNext();)if(t(e.current()))return!0;return!1}finally{n.dispose(e)}},i.prototype.isEmpty=function(){return!this.any()},i.prototype.concat=function(){var t=this;if(1==arguments.length){var e=arguments[0];return new i(function(){var r,u;return new o(function(){r=t.getEnumerator()},function(){if(null==u){if(r.moveNext())return this.yieldReturn(r.current());u=i.from(e).getEnumerator()}return!!u.moveNext()&&this.yieldReturn(u.current())},function(){try{n.dispose(r)}finally{n.dispose(u)}})})}var r=arguments;return new i(function(){var e;return new o(function(){e=i.make(t).concat(i.from(r).select(i.from)).select(function(t){return t.getEnumerator()}).toArray()},function(){for(;e.length>0;){var t=e[0];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),e.splice(0,1)}return this.yieldBreak()},function(){i.from(e).forEach(n.dispose)})})},i.prototype.insert=function(t,e){var r=this;return new i(function(){var u,c,a=0,f=!1;return new o(function(){u=r.getEnumerator(),c=i.from(e).getEnumerator()},function(){return a==t&&c.moveNext()?(f=!0,this.yieldReturn(c.current())):u.moveNext()?(a++,this.yieldReturn(u.current())):!(f||!c.moveNext())&&this.yieldReturn(c.current())},function(){try{n.dispose(u)}finally{n.dispose(c)}})})},i.prototype.alternate=function(t){var e=this;return new i(function(){var r,u,c,a;return new o(function(){c=t instanceof Array||null!=t.getEnumerator?i.from(i.from(t).toArray()):i.make(t),u=e.getEnumerator(),u.moveNext()&&(r=u.current())},function(){for(;;){if(null!=a){if(a.moveNext())return this.yieldReturn(a.current());a=null}{if(null!=r||!u.moveNext()){if(null!=r){var t=r;return r=null,this.yieldReturn(t)}return this.yieldBreak()}r=u.current(),a=c.getEnumerator()}}},function(){try{n.dispose(u)}finally{n.dispose(a)}})})},i.prototype.contains=function(t,e){e=n.createLambda(e);var r=this.getEnumerator();try{for(;r.moveNext();)if(e(r.current())===t)return!0;return!1}finally{n.dispose(r)}},i.prototype.defaultIfEmpty=function(t){var e=this;return void 0===t&&(t=null),new i(function(){var r,u=!0;return new o(function(){r=e.getEnumerator()},function(){return r.moveNext()?(u=!1,this.yieldReturn(r.current())):!!u&&(u=!1,this.yieldReturn(t))},function(){n.dispose(r)})})},i.prototype.distinct=function(t){return this.except(i.empty(),t)},i.prototype.distinctUntilChanged=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r,u,i;return new o(function(){r=e.getEnumerator()},function(){for(;r.moveNext();){var e=t(r.current());if(i)return i=!1,u=e,this.yieldReturn(r.current());if(u!==e)return u=e,this.yieldReturn(r.current())}return this.yieldBreak()},function(){n.dispose(r)})})},i.prototype.except=function(t,e){e=n.createLambda(e);var r=this;return new i(function(){var u,c;return new o(function(){u=r.getEnumerator(),c=new h(e),i.from(t).forEach(function(t){c.add(t)})},function(){for(;u.moveNext();){var t=u.current();if(!c.contains(t))return c.add(t),this.yieldReturn(t)}return!1},function(){n.dispose(u)})})},i.prototype.intersect=function(t,e){e=n.createLambda(e);var r=this;return new i(function(){var u,c,a;return new o(function(){u=r.getEnumerator(),c=new h(e),i.from(t).forEach(function(t){c.add(t)}),a=new h(e)},function(){for(;u.moveNext();){var t=u.current();if(!a.contains(t)&&c.contains(t))return a.add(t),this.yieldReturn(t)}return!1},function(){n.dispose(u)})})},i.prototype.sequenceEqual=function(t,e){e=n.createLambda(e);var r=this.getEnumerator();try{var o=i.from(t).getEnumerator();try{for(;r.moveNext();)if(!o.moveNext()||e(r.current())!==e(o.current()))return!1;return!o.moveNext()}finally{n.dispose(o)}}finally{n.dispose(r)}},i.prototype.union=function(t,e){e=n.createLambda(e);var r=this;return new i(function(){var u,c,a;return new o(function(){u=r.getEnumerator(),a=new h(e)},function(){var e;if(void 0===c){for(;u.moveNext();)if(e=u.current(),!a.contains(e))return a.add(e),this.yieldReturn(e);c=i.from(t).getEnumerator()}for(;c.moveNext();)if(e=c.current(),!a.contains(e))return a.add(e),this.yieldReturn(e);return!1},function(){try{n.dispose(u)}finally{n.dispose(c)}})})},i.prototype.orderBy=function(t){return new c(this,t,(!1))},i.prototype.orderByDescending=function(t){return new c(this,t,(!0))},i.prototype.reverse=function(){var e=this;return new i(function(){var n,r;return new o(function(){n=e.toArray(),r=n.length},function(){return r>0&&this.yieldReturn(n[--r])},t.Blank)})},i.prototype.shuffle=function(){var e=this;return new i(function(){var n;return new o(function(){n=e.toArray()},function(){if(n.length>0){var t=Math.floor(Math.random()*n.length);return this.yieldReturn(n.splice(t,1)[0])}return!1},t.Blank)})},i.prototype.weightedSample=function(e){e=n.createLambda(e);var r=this;return new i(function(){var n,u=0;return new o(function(){n=r.choose(function(t){var n=e(t);return n<=0?null:(u+=n,{value:t,bound:u})}).toArray()},function(){if(n.length>0){for(var t=Math.floor(Math.random()*u)+1,e=-1,r=n.length;r-e>1;){var o=Math.floor((e+r)/2);n[o].bound>=t?r=o:e=o}return this.yieldReturn(n[r].value)}return this.yieldBreak()},t.Blank)})},i.prototype.groupBy=function(t,e,r,u){var c=this;return t=n.createLambda(t),e=n.createLambda(e),null!=r&&(r=n.createLambda(r)),u=n.createLambda(u),new i(function(){var i;return new o(function(){i=c.toLookup(t,e,u).toEnumerable().getEnumerator()},function(){for(;i.moveNext();)return null==r?this.yieldReturn(i.current()):this.yieldReturn(r(i.current().key(),i.current()));return!1},function(){n.dispose(i)})})},i.prototype.partitionBy=function(t,e,r,u){var c=this;t=n.createLambda(t),e=n.createLambda(e),u=n.createLambda(u);var a;return null==r?(a=!1,r=function(t,e){return new y(t,e)}):(a=!0,r=n.createLambda(r)),new i(function(){var f,s,l,p=[];return new o(function(){f=c.getEnumerator(),f.moveNext()&&(s=t(f.current()),l=u(s),p.push(e(f.current())))},function(){for(var n;1==(n=f.moveNext())&&l===u(t(f.current()));)p.push(e(f.current()));if(p.length>0){var o=a?r(s,i.from(p)):r(s,p);return n?(s=t(f.current()),l=u(s),p=[e(f.current())]):p=[],this.yieldReturn(o)}return!1},function(){n.dispose(f)})})},i.prototype.buffer=function(t){var e=this;return new i(function(){var r;return new o(function(){r=e.getEnumerator()},function(){for(var e=[],n=0;r.moveNext();)if(e.push(r.current()),++n>=t)return this.yieldReturn(e);return e.length>0&&this.yieldReturn(e)},function(){n.dispose(r)})})},i.prototype.aggregate=function(t,e,r){return(r=n.createLambda(r))(this.scan(t,e,r).last())},i.prototype.average=function(t){t=n.createLambda(t);var e=0,r=0;return this.forEach(function(n){e+=t(n),++r}),e/r},i.prototype.count=function(e){e=null==e?t.True:n.createLambda(e);var r=0;return this.forEach(function(t,n){e(t,n)&&++r}),r},i.prototype.max=function(e){return null==e&&(e=t.Identity),this.select(e).aggregate(function(t,e){return t>e?t:e})},i.prototype.min=function(e){return null==e&&(e=t.Identity),this.select(e).aggregate(function(t,e){return t<e?t:e})},i.prototype.maxBy=function(t){return t=n.createLambda(t),this.aggregate(function(e,n){return t(e)>t(n)?e:n})},i.prototype.minBy=function(t){return t=n.createLambda(t),this.aggregate(function(e,n){return t(e)<t(n)?e:n})},i.prototype.sum=function(e){return null==e&&(e=t.Identity),this.select(e).aggregate(0,function(t,e){return t+e})},i.prototype.elementAt=function(t){var e,n=!1;if(this.forEach(function(r,o){if(o==t)return e=r,n=!0,!1}),!n)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return e},i.prototype.elementAtOrDefault=function(t,e){void 0===e&&(e=null);var n,r=!1;return this.forEach(function(e,o){if(o==t)return n=e,r=!0,!1}),r?n:e},i.prototype.first=function(t){if(null!=t)return this.where(t).first();var e,n=!1;if(this.forEach(function(t){return e=t,n=!0,!1}),!n)throw new Error("first:No element satisfies the condition.");return e},i.prototype.firstOrDefault=function(t,e){if(void 0===e&&(e=null),null!=t)return this.where(t).firstOrDefault(null,e);var n,r=!1;return this.forEach(function(t){return n=t,r=!0,!1}),r?n:e},i.prototype.last=function(t){if(null!=t)return this.where(t).last();var e,n=!1;if(this.forEach(function(t){n=!0,e=t}),!n)throw new Error("last:No element satisfies the condition.");return e},i.prototype.lastOrDefault=function(t,e){if(void 0===e&&(e=null),null!=t)return this.where(t).lastOrDefault(null,e);var n,r=!1;return this.forEach(function(t){r=!0,n=t}),r?n:e},i.prototype.single=function(t){if(null!=t)return this.where(t).single();var e,n=!1;if(this.forEach(function(t){if(n)throw new Error("single:sequence contains more than one element.");n=!0,e=t}),!n)throw new Error("single:No element satisfies the condition.");return e},i.prototype.singleOrDefault=function(t,e){if(void 0===e&&(e=null),null!=t)return this.where(t).singleOrDefault(null,e);var n,r=!1;return this.forEach(function(t){if(r)throw new Error("single:sequence contains more than one element.");r=!0,n=t}),r?n:e},i.prototype.skip=function(t){var e=this;return new i(function(){var r,u=0;return new o(function(){for(r=e.getEnumerator();u++<t&&r.moveNext(););},function(){return!!r.moveNext()&&this.yieldReturn(r.current())},function(){n.dispose(r)})})},i.prototype.skipWhile=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r,u=0,i=!1;return new o(function(){r=e.getEnumerator()},function(){for(;!i;){if(!r.moveNext())return!1;if(!t(r.current(),u++))return i=!0,this.yieldReturn(r.current())}return!!r.moveNext()&&this.yieldReturn(r.current())},function(){n.dispose(r)})})},i.prototype.take=function(t){var e=this;return new i(function(){var r,u=0;return new o(function(){r=e.getEnumerator()},function(){return!!(u++<t&&r.moveNext())&&this.yieldReturn(r.current())},function(){n.dispose(r)})})},i.prototype.takeWhile=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r,u=0;return new o(function(){r=e.getEnumerator()},function(){return!(!r.moveNext()||!t(r.current(),u++))&&this.yieldReturn(r.current())},function(){n.dispose(r)})})},i.prototype.takeExceptLast=function(t){null==t&&(t=1);var e=this;return new i(function(){if(t<=0)return e.getEnumerator();var r,u=[];return new o(function(){r=e.getEnumerator()},function(){for(;r.moveNext();){if(u.length==t)return u.push(r.current()),this.yieldReturn(u.shift());u.push(r.current())}return!1},function(){n.dispose(r)})})},i.prototype.takeFromLast=function(t){if(t<=0||null==t)return i.empty();var e=this;return new i(function(){var r,u,c=[];return new o(function(){r=e.getEnumerator()},function(){for(;r.moveNext();)c.length==t&&c.shift(),c.push(r.current());return null==u&&(u=i.from(c).getEnumerator()),!!u.moveNext()&&this.yieldReturn(u.current())},function(){n.dispose(u)})})},i.prototype.indexOf=function(t){var n=null;return("undefined"==typeof t?"undefined":_typeof(t))===e.Function?this.forEach(function(e,r){if(t(e,r))return n=r,!1}):this.forEach(function(e,r){if(e===t)return n=r,!1}),null!==n?n:-1},i.prototype.lastIndexOf=function(t){var n=-1;return("undefined"==typeof t?"undefined":_typeof(t))===e.Function?this.forEach(function(e,r){t(e,r)&&(n=r)}):this.forEach(function(e,r){e===t&&(n=r)}),n},i.prototype.asEnumerable=function(){return i.from(this)},i.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},i.prototype.toLookup=function(t,e,r){t=n.createLambda(t),e=n.createLambda(e),r=n.createLambda(r);var o=new h(r);return this.forEach(function(n){var r=t(n),u=e(n),i=o.get(r);void 0!==i?i.push(u):o.add(r,[u])}),new d(o)},i.prototype.toObject=function(t,e){t=n.createLambda(t),e=n.createLambda(e);var r={};return this.forEach(function(n){r[t(n)]=e(n)}),r},i.prototype.toDictionary=function(t,e,r){t=n.createLambda(t),e=n.createLambda(e),r=n.createLambda(r);var o=new h(r);return this.forEach(function(n){o.add(t(n),e(n))}),o},i.prototype.toJSONString=function(t,n){if(("undefined"==typeof JSON?"undefined":_typeof(JSON))===e.Undefined||null==JSON.stringify)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),t,n)},i.prototype.toJoinedString=function(e,n){return null==e&&(e=""),null==n&&(n=t.Identity),this.select(n).toArray().join(e)},i.prototype.doAction=function(t){var e=this;return t=n.createLambda(t),new i(function(){var r,u=0;return new o(function(){r=e.getEnumerator()},function(){return!!r.moveNext()&&(t(r.current(),u++),this.yieldReturn(r.current()))},function(){n.dispose(r)})})},i.prototype.forEach=function(t){t=n.createLambda(t);var e=0,r=this.getEnumerator();try{for(;r.moveNext()&&t(r.current(),e++)!==!1;);}finally{n.dispose(r)}},i.prototype.write=function(t,e){null==t&&(t=""),e=n.createLambda(e);var r=!0;this.forEach(function(n){r?r=!1:document.write(t),document.write(e(n))})},i.prototype.writeLine=function(t){t=n.createLambda(t),this.forEach(function(e){document.writeln(t(e)+"<br />")})},i.prototype.force=function(){var t=this.getEnumerator();try{for(;t.moveNext(););}finally{n.dispose(t)}},i.prototype.letBind=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r;return new o(function(){r=i.from(t(e)).getEnumerator()},function(){return!!r.moveNext()&&this.yieldReturn(r.current())},function(){n.dispose(r)})})},i.prototype.share=function(){var e,r=this,u=!1;return new f(function(){return new o(function(){null==e&&(e=r.getEnumerator())},function(){if(u)throw new Error("enumerator is disposed");return!!e.moveNext()&&this.yieldReturn(e.current())},t.Blank)},function(){u=!0,n.dispose(e)})},i.prototype.memoize=function(){var e,r,u=this,i=!1;return new f(function(){var n=-1;return new o(function(){null==r&&(r=u.getEnumerator(),e=[])},function(){if(i)throw new Error("enumerator is disposed");return n++,e.length<=n?!!r.moveNext()&&this.yieldReturn(e[n]=r.current()):this.yieldReturn(e[n])},t.Blank)},function(){i=!0,n.dispose(r),e=null})},i.prototype.catchError=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r;return new o(function(){r=e.getEnumerator()},function(){try{return!!r.moveNext()&&this.yieldReturn(r.current())}catch(e){return t(e),!1}},function(){n.dispose(r)})})},i.prototype.finallyAction=function(t){t=n.createLambda(t);var e=this;return new i(function(){var r;return new o(function(){r=e.getEnumerator()},function(){return!!r.moveNext()&&this.yieldReturn(r.current())},function(){try{n.dispose(r)}finally{t()}})})},i.prototype.log=function(t){return t=n.createLambda(t),this.doAction(function(n){("undefined"==typeof console?"undefined":_typeof(console))!==e.Undefined&&console.log(t(n))})},i.prototype.trace=function(t,r){return null==t&&(t="Trace"),r=n.createLambda(r),this.doAction(function(n){("undefined"==typeof console?"undefined":_typeof(console))!==e.Undefined&&console.log(t,r(n))})};var c=function(t,e,r,o){this.source=t,this.keySelector=n.createLambda(e),this.descending=r,this.parent=o};c.prototype=new i,c.prototype.createOrderedEnumerable=function(t,e){return new c(this.source,t,e,this)},c.prototype.thenBy=function(t){return this.createOrderedEnumerable(t,!1)},c.prototype.thenByDescending=function(t){return this.createOrderedEnumerable(t,!0)},c.prototype.getEnumerator=function(){var e,n,r=this,u=0;return new o(function(){e=[],n=[],r.source.forEach(function(t,r){e.push(t),n.push(r)});var t=a.create(r,null);t.GenerateKeys(e),n.sort(function(e,n){return t.compare(e,n)})},function(){return u<n.length&&this.yieldReturn(e[n[u++]])},t.Blank)};var a=function(t,e,n){this.keySelector=t,this.descending=e,this.child=n,this.keys=null};a.create=function(t,e){var n=new a(t.keySelector,t.descending,e);return null!=t.parent?a.create(t.parent,n):n},a.prototype.GenerateKeys=function(t){for(var e=t.length,n=this.keySelector,r=new Array(e),o=0;o<e;o++)r[o]=n(t[o]);this.keys=r,null!=this.child&&this.child.GenerateKeys(t)},a.prototype.compare=function(t,e){var r=n.compare(this.keys[t],this.keys[e]);return 0==r?null!=this.child?this.child.compare(t,e):n.compare(t,e):this.descending?-r:r};var f=function(t,e){this.dispose=e,i.call(this,t)};f.prototype=new i;var s=function(t){this.getSource=function(){return t}};s.prototype=new i,s.prototype.any=function(t){return null==t?this.getSource().length>0:i.prototype.any.apply(this,arguments)},s.prototype.count=function(t){return null==t?this.getSource().length:i.prototype.count.apply(this,arguments)},s.prototype.elementAt=function(t){var e=this.getSource();return 0<=t&&t<e.length?e[t]:i.prototype.elementAt.apply(this,arguments)},s.prototype.elementAtOrDefault=function(t,e){void 0===e&&(e=null);var n=this.getSource();return 0<=t&&t<n.length?n[t]:e},s.prototype.first=function(t){var e=this.getSource();return null==t&&e.length>0?e[0]:i.prototype.first.apply(this,arguments)},s.prototype.firstOrDefault=function(t,e){if(void 0===e&&(e=null),null!=t)return i.prototype.firstOrDefault.apply(this,arguments);var n=this.getSource();return n.length>0?n[0]:e},s.prototype.last=function(t){var e=this.getSource();return null==t&&e.length>0?e[e.length-1]:i.prototype.last.apply(this,arguments)},s.prototype.lastOrDefault=function(t,e){if(void 0===e&&(e=null),null!=t)return i.prototype.lastOrDefault.apply(this,arguments);var n=this.getSource();return n.length>0?n[n.length-1]:e},s.prototype.skip=function(e){var n=this.getSource();return new i(function(){var r;return new o(function(){r=e<0?0:e},function(){return r<n.length&&this.yieldReturn(n[r++])},t.Blank)})},s.prototype.takeExceptLast=function(t){return null==t&&(t=1),this.take(this.getSource().length-t)},s.prototype.takeFromLast=function(t){return this.skip(this.getSource().length-t)},s.prototype.reverse=function(){var e=this.getSource();return new i(function(){var n;return new o(function(){n=e.length},function(){return n>0&&this.yieldReturn(e[--n])},t.Blank)})},s.prototype.sequenceEqual=function(t,e){return(!(t instanceof s||t instanceof Array)||null!=e||i.from(t).count()==this.count())&&i.prototype.sequenceEqual.apply(this,arguments)},s.prototype.toJoinedString=function(t,e){var n=this.getSource();return null==e&&n instanceof Array?(null==t&&(t=""),n.join(t)):i.prototype.toJoinedString.apply(this,arguments)},s.prototype.getEnumerator=function(){var e=this.getSource(),n=-1;return{current:function(){return e[n]},moveNext:function(){return++n<e.length},dispose:t.Blank}};var l=function(t,e){this.prevSource=t,this.prevPredicate=e};l.prototype=new i,l.prototype.where=function(t){if(t=n.createLambda(t),t.length<=1){var e=this.prevPredicate,r=function(n){return e(n)&&t(n)};return new l(this.prevSource,r)}return i.prototype.where.call(this,t)},l.prototype.select=function(t){return t=n.createLambda(t),t.length<=1?new p(this.prevSource,this.prevPredicate,t):i.prototype.select.call(this,t)},l.prototype.getEnumerator=function(){var t,e=this.prevPredicate,r=this.prevSource;return new o(function(){t=r.getEnumerator()},function(){for(;t.moveNext();)if(e(t.current()))return this.yieldReturn(t.current());return!1},function(){n.dispose(t)})};var p=function(t,e,n){this.prevSource=t,this.prevPredicate=e,this.prevSelector=n};p.prototype=new i,p.prototype.where=function(t){return t=n.createLambda(t),t.length<=1?new l(this,t):i.prototype.where.call(this,t)},p.prototype.select=function(t){if(t=n.createLambda(t),t.length<=1){var e=this.prevSelector,r=function(n){return t(e(n))};return new p(this.prevSource,this.prevPredicate,r)}return i.prototype.select.call(this,t)},p.prototype.getEnumerator=function(){var t,e=this.prevPredicate,r=this.prevSelector,u=this.prevSource;return new o(function(){t=u.getEnumerator()},function(){for(;t.moveNext();)if(null==e||e(t.current()))return this.yieldReturn(r(t.current()));return!1},function(){n.dispose(t)})};var h=function(){var n=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r=function(t){return null===t?"null":void 0===t?"undefined":_typeof(t.toString)===e.Function?t.toString():Object.prototype.toString.call(t);
},u=function(t,e){this.key=t,this.value=e,this.prev=null,this.next=null},c=function(){this.first=null,this.last=null};c.prototype={addLast:function(t){null!=this.last?(this.last.next=t,t.prev=this.last,this.last=t):this.first=this.last=t},replace:function(t,e){null!=t.prev?(t.prev.next=e,e.prev=t.prev):this.first=e,null!=t.next?(t.next.prev=e,e.next=t.next):this.last=e},remove:function(t){null!=t.prev?t.prev.next=t.next:this.first=t.next,null!=t.next?t.next.prev=t.prev:this.last=t.prev}};var a=function(e){this.countField=0,this.entryList=new c,this.buckets={},this.compareSelector=null==e?t.Identity:e};return a.prototype={add:function(t,e){var o=this.compareSelector(t),i=r(o),c=new u(t,e);if(n(this.buckets,i)){for(var a=this.buckets[i],f=0;f<a.length;f++)if(this.compareSelector(a[f].key)===o)return this.entryList.replace(a[f],c),void(a[f]=c);a.push(c)}else this.buckets[i]=[c];this.countField++,this.entryList.addLast(c)},get:function(t){var e=this.compareSelector(t),o=r(e);if(n(this.buckets,o))for(var u=this.buckets[o],i=0;i<u.length;i++){var c=u[i];if(this.compareSelector(c.key)===e)return c.value}},set:function(t,e){var o=this.compareSelector(t),i=r(o);if(n(this.buckets,i))for(var c=this.buckets[i],a=0;a<c.length;a++)if(this.compareSelector(c[a].key)===o){var f=new u(t,e);return this.entryList.replace(c[a],f),c[a]=f,!0}return!1},contains:function(t){var e=this.compareSelector(t),o=r(e);if(!n(this.buckets,o))return!1;for(var u=this.buckets[o],i=0;i<u.length;i++)if(this.compareSelector(u[i].key)===e)return!0;return!1},clear:function(){this.countField=0,this.buckets={},this.entryList=new c},remove:function(t){var e=this.compareSelector(t),o=r(e);if(n(this.buckets,o))for(var u=this.buckets[o],i=0;i<u.length;i++)if(this.compareSelector(u[i].key)===e)return this.entryList.remove(u[i]),u.splice(i,1),0==u.length&&delete this.buckets[o],void this.countField--},count:function(){return this.countField},toEnumerable:function(){var e=this;return new i(function(){var n;return new o(function(){n=e.entryList.first},function(){if(null!=n){var t={key:n.key,value:n.value};return n=n.next,this.yieldReturn(t)}return!1},t.Blank)})}},a}(),d=function(t){this.count=function(){return t.count()},this.get=function(e){return i.from(t.get(e))},this.contains=function(e){return t.contains(e)},this.toEnumerable=function(){return t.toEnumerable().select(function(t){return new y(t.key,t.value)})}},y=function(t,e){this.key=function(){return t},s.call(this,e)};return y.prototype=new s,{Enumerable:i}});