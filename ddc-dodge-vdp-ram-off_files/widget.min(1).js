!function(){var e=this,t=e.jQuery,i=(e.DDC,{a:"a",imageViewerHolder:'[data-widget-id*="inventory-image"]',imageViewerClose:'[data-widget-id*="inventory-image"] .close',imageViewer:".imageViewer",photosPhoto:".photo:not(.thumb)",photosPhotoAnchor:".imageViewer a:has(.photo:not(.thumb))",photosThumb:".jcarousel .photo.thumb",photosThumbMouseoverTrigger:".mouseover-trigger-click .jcarousel .photo.thumb, .mouseover-trigger-click.jcarousel .photo.thumb",bd2:".bd2",tabWidget:".inventory-detail-media-tabs",tabNav:".ui-tabs-nav li",tabsPanel:".ui-tabs-panel",dialog:".ui-dialog",spinAnchor:"#spins a",spinViewer:"#spins .imageViewer",imageScrollPrev:".imageScrollPrev",imageScrollNext:".imageScrollNext",navigation:"[data-widget-id=template-navigation1],.ddc-main-nav"}),o={hide:"hide",vh:"visibility-hidden"},n={page:{photoSelect:"photo-select"},user:{photosThumbClick:"click",photosThumbMouseover:"mouseover",spinClick:"click",navIn:"mouseenter",navOut:"mouseleave"}},a={user:{live:{photosThumbClick:i.photosThumb,photosThumbMouseover:i.photosThumbMouseoverTrigger,spinClick:i.spinAnchor,navIn:i.navigation,navOut:i.navigation},traditional:{}}},r=function(i,o,n,a){return t(i).each(function(){var t,i=this;-1!==navigator.userAgent.indexOf("MSIE")?i.innerHTML=['<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" width="',n?parseInt(n,10):320,'" height="',a?parseInt(a,10):240,'" codebase="'+e.location.protocol+'//www.apple.com/qtactivex/qtplugin.cab"><param name="src" value="',o,'"><param name="autoplay" value="true"><param name="controller" value="false"></object>'].join(""):(t=document.createElement("embed"),t.type="video/quicktime",t.src=o,t.width=n?parseInt(n,10):"320",t.height=a?parseInt(a,10):"240",t.autoplay="true",t.controller="false",this.innerHTML="",this.appendChild(t))})},s=function(){var e=!1;return t(".ui-dialog:visible").each(function(){e=!0}),e},h={page:{photoZoomToggle:function(e,n){n&&n.url&&!t(i.imageViewerHolder).data("initialized")?t.ajax({url:n.url,type:"get",dataType:"html",success:function(e){var o=t(i.imageViewerHolder,document).html();t(i.imageViewerHolder,document).replaceWith(t(i.imageViewerHolder,e)),t(i.imageViewerHolder,document).width(t(i.imageViewerHolder,document).width()).css({position:"absolute",zIndex:100}).data("initialized",!0).find(i.bd2).eq(0).prepend(o),t(document).trigger("modulesRefresh")}}):t(i.imageViewerHolder).data("initialized")&&t(i.imageViewerHolder).toggleClass(o.hide)},photoSelect:function(e,o){if(o&&o.url&&o.context){var n=t(o.context).attr("id")+"-url",a={};a[n]=encodeURIComponent(o.url),t(document).trigger("dynamicUrls",[a]),t(o.context).find(i.photosPhoto).attr("src",o.url),t(document).trigger("trackEvent",{widgetName:"inventory-detail",eventName:"photo viewer",data:"photo"})}}},user:{photosPhotoClick:function(){var e={url:t(this).attr("href")};return t(document).trigger(n.page.photoZoomToggle,[e]),!1},photosCloseClick:function(){return t(document).trigger(n.page.photoZoomToggle),!1},photosThumbMouseover:function(){t(this).trigger("click")},photosThumbClick:function(){var e={url:t(this).parent("a").attr("href")};return t(this).parents(i.tabsPanel).size()&&(e.context=t(this).parents(i.tabsPanel)),t(this).parents(i.dialog).size()&&(e.context=t(this).parents(i.dialog)),t(document).trigger(n.page.photoSelect,[e]),!1},spinClick:function(){var e=t(this).attr("href");return r(t(i.spinViewer),e,320,240),!1},navIn:function(){t(i.spinViewer).children().addClass(o.vh)},navOut:function(){s()||t(i.spinViewer).children().removeClass(o.vh)}}},u={tabClickTracker:function(){t(i.tabWidget).bind("tabsshow",function(e,o){if(o.panel.className){var n=t(i.tabWidget+" "+i.tabNav).eq(o.index).find(i.a).attr("href").replace("#","");t(document).trigger("trackEvent",{widgetName:"inventory-detail",eventName:"sub-tab",data:n})}})},spinTabClick:function(){t(i.tabWidget).bind("tabsshow",function(){var e=t(this).find('.ui-tabs-selected a[href="#spins"]');if(e.size()>0){var o=t(i.spinAnchor).first().attr("href");r(t(i.spinViewer),o,320,240)}})},defaultPhotos:function(){t(i.tabsPanel).has(i.photosPhoto).each(function(){var e={url:t(this).find(i.photosPhoto).eq(0).attr("src"),tabsPanel:this};t(this).find(i.photosThumb).size()&&(e.url=t(this).find(i.photosThumb).eq(0).parent(i.a).attr("href")),setTimeout(function(){t(document).trigger(n.page.photoSelect,[e])},750)})},enzoom:function(){t(i.tabsPanel).has(i.photosPhoto).each(function(){var e,n,a,r,s,h,u,c=this,l=.2,d=function(){r=this.width,s=this.height,h=Math.abs(n/r-1),u=Math.abs(a/s-1),h>l&&r>n||u>l&&s>a?t(c).find(i.imageViewer).find(".ui-state").parent().removeClass(o.hide):(t(c).find(i.imageViewer).find(".ui-state").parent().remove(),t(c).find(i.photosPhoto).unwrap())};setTimeout(function(){t(c).find(i.photosPhoto).each(function(){n=t(this).width(),a=t(this).height(),e=new Image,e.onload=d,e.src=t(c).find(i.photosPhoto).attr("src")})},250)})},hide360:function(){t(document).bind("dialogopen",function(){t(i.spinViewer).children().addClass(o.vh)}),t(document).bind("dialogclose",function(){t(i.spinViewer).children().removeClass(o.vh)})}};t(function(){t.each(n.page,function(e){t(document).bind(n.page[e],h.page[e])}),t.each(a.user.live,function(e){t(a.user.live[e]).die(n.user[e]).live(n.user[e],h.user[e])}),t.each(a.user.traditional,function(e){t(a.user.traditional[e]).unbind(n.user[e]).bind(n.user[e],h.user[e])}),t.each(u,function(e){t.isFunction(u[e])&&u[e]()})})}();